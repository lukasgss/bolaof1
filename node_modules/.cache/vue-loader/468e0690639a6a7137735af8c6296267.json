{"remainingRequest":"/home/lucas/Dev/f1game/client/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/lucas/Dev/f1game/client/src/components/TempoProxCorrida.vue?vue&type=style&index=0&id=763d8d66&scoped=true&lang=css","dependencies":[{"path":"/home/lucas/Dev/f1game/client/src/components/TempoProxCorrida.vue","mtime":1642770700907},{"path":"/home/lucas/Dev/f1game/client/node_modules/css-loader/dist/cjs.js","mtime":1642536827666},{"path":"/home/lucas/Dev/f1game/client/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1642536828066},{"path":"/home/lucas/Dev/f1game/client/node_modules/postcss-loader/src/index.js","mtime":1642536827810},{"path":"/home/lucas/Dev/f1game/client/node_modules/cache-loader/dist/cjs.js","mtime":1642536827418},{"path":"/home/lucas/Dev/f1game/client/node_modules/vue-loader-v16/dist/index.js","mtime":1642536827810}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jb250YWluZXItdGVtcG8gewogIGZvbnQtc2l6ZTogMzBweDsKICBwYWRkaW5nLXRvcDogMjBweDsKICBmb250LXdlaWdodDogOTAwOwogIG1hcmdpbjogMCBhdXRvOwp9CgouY29udGFkb3IgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogcmdiKDI1MCwgMTYsIDE2KTsKICBmb250LXNpemU6IDQ1cHg7Cn0KCi50ZXh0by1jb250YWRvciB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiByZ2IoMjUwLCAxNiwgMTYpOwogIG1hcmdpbjogMCBhdXRvOwogIGZvbnQtc2l6ZTogMzVweDsKfQoKLnRleHRvLWNvbnRhZG9yIHsKICBtYXJnaW4tdG9wOiAtNXB4Owp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MDBweCkgewogIC5jb250YWRvciB7CiAgICBwYWRkaW5nLXRvcDogOHB4OwogICAgZm9udC1zaXplOiAzN3B4OwogIH0KCiAgLnRleHRvLWNvbnRhZG9yIHsKICAgIGZvbnQtc2l6ZTogMjZweDsKICAgIG1hcmdpbi10b3A6IDBweDsKICB9Cn0K"},{"version":3,"sources":["/home/lucas/Dev/f1game/client/src/components/TempoProxCorrida.vue"],"names":[],"mappings":";AAkJA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAChB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACjB;AACF","file":"/home/lucas/Dev/f1game/client/src/components/TempoProxCorrida.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"contador\">\n    <h2 class=\"tempo-restante\">\n      {{ dadosTempoCorridaSeguinte.dias.toString().padStart(2, \"0\") }}d\n      {{ dadosTempoCorridaSeguinte.horas.toString().padStart(2, \"0\") }}h\n      {{ dadosTempoCorridaSeguinte.minutos.toString().padStart(2, \"0\") }}m\n      {{ dadosTempoCorridaSeguinte.segundos.toString().padStart(2, \"0\") }}s\n    </h2>\n  </div>\n  <div class=\"texto-contador\">\n    <p class=\"texto-tempo\">para próxima corrida</p>\n  </div>\n</template>\n\n<script>\nconst moment = require(\"moment\");\n\nexport default {\n  data() {\n    return {\n      anoAtual: new Date().getUTCFullYear(),\n      dataAtual: moment().format(\"YYYY-MM-DD\"),\n      dataAtualFormatada: moment().format(\"DD-MM-YYYY\"),\n      dadosTempoCorridaSeguinte: {\n        dias: \"00\",\n        horas: \"00\",\n        minutos: \"00\",\n        segundos: \"00\",\n      },\n    };\n  },\n  methods: {\n    async obterDataProxCorrida() {\n      const url = \"https://ergast.com/api/f1/current/next.json\";\n      const resposta = await fetch(url);\n      const dadosProxCorrida = await resposta.json();\n\n      const dataProxCorrida = dadosProxCorrida.MRData.RaceTable.Races[0].date;\n      const horario = dadosProxCorrida.MRData.RaceTable.Races[0].time.split(\"Z\")[0];\n      const arrDataCorrida = dataProxCorrida.split(\"-\");\n      let arrHorario = horario.split(\"Z\");\n      arrHorario = arrHorario.join(\"\").split(\":\");\n\n      return {\n        dia: arrDataCorrida[2],\n        mes: arrDataCorrida[1],\n        ano: arrDataCorrida[0],\n        hora: arrHorario[0],\n        minutos: arrHorario[1],\n        segundos: arrHorario[2],\n      };\n    },\n    formatarDadosDiaAtual(dadosHorario, dadosData) {\n      const horarioArr = dadosHorario.split(\":\");\n      const dataArr = dadosData.split(\"/\");\n      console.log(dadosData);\n\n      return {\n        dia: parseInt(dataArr[0]),\n        mes: parseInt(dataArr[1]),\n        ano: parseInt(dataArr[2]),\n        hora: parseInt(horarioArr[0]),\n        minutos: parseInt(horarioArr[1]),\n        segundos: parseInt(horarioArr[2]),\n      };\n    },\n    async calcularTempoProxCorrida() {\n      const dadosProxCorrida = await this.obterDataProxCorrida();\n      const horario = new Date().toLocaleTimeString(\"pt-BR\");\n      const dataAtual = new Date().toLocaleDateString(\"pt-BR\");\n      const dadosDataAtual = this.formatarDadosDiaAtual(horario, dataAtual);\n\n      const dataHoje = new Date(\n        dadosDataAtual.ano,\n        dadosDataAtual.mes,\n        dadosDataAtual.dia,\n        dadosDataAtual.hora,\n        dadosDataAtual.minutos,\n        dadosDataAtual.segundos\n      );\n\n      const dataCorrida = new Date(\n        dadosProxCorrida.ano,\n        dadosProxCorrida.mes,\n        dadosProxCorrida.dia,\n        dadosProxCorrida.hora,\n        dadosProxCorrida.minutos,\n        dadosProxCorrida.segundos\n      );\n\n      // Subtrai 10.800.000ms (3 horas) por causa do fuso horário brasileiro (GMT -3)\n      const milissegundosDataCorrida = dataCorrida.getTime() - 10800000;\n      const milissegundosDataHoje = dataHoje.getTime();\n\n      const diferencaDatas = this.calcularDiferencasDatas(milissegundosDataHoje, milissegundosDataCorrida);\n\n      if (diferencaDatas === 0) return;\n      this.atualizarTempoRestanteCorrida(diferencaDatas);\n    },\n    calcularDiferencasDatas(dataAtual, dataCorrida) {\n      let diferenca = (dataCorrida - dataAtual) / 1000;\n      const diferencaSegundos = Math.floor(diferenca % 60);\n      diferenca = Math.floor(diferenca / 60);\n      const diferencaMinutos = diferenca % 60;\n      diferenca = Math.floor(diferenca / 60);\n      const diferencaHoras = diferenca % 24;\n      diferenca = Math.floor(diferenca / 24);\n      const diferencaDias = diferenca;\n\n      return {\n        diferencaSegundos,\n        diferencaMinutos,\n        diferencaHoras,\n        diferencaDias,\n      };\n    },\n    atualizarTempoRestanteCorrida(tempoRestante) {\n      this.dadosTempoCorridaSeguinte.dias = tempoRestante.diferencaDias;\n      this.dadosTempoCorridaSeguinte.horas = tempoRestante.diferencaHoras;\n      this.dadosTempoCorridaSeguinte.minutos = tempoRestante.diferencaMinutos;\n      this.dadosTempoCorridaSeguinte.segundos = tempoRestante.diferencaSegundos;\n    },\n  },\n  created() {\n    this.calcularTempoProxCorrida();\n  },\n  mounted: function () {\n    window.setInterval(() => {\n      if (this.dadosTempoCorridaSeguinte.segundos === 0) {\n        this.dadosTempoCorridaSeguinte.segundos = 59;\n        this.dadosTempoCorridaSeguinte.minutos--;\n      } else {\n        this.dadosTempoCorridaSeguinte.segundos--;\n      }\n\n      if (this.dadosTempoCorridaSeguinte.minutos === 0 && this.dadosTempoCorridaSeguinte.segundos === 0) {\n        this.dadosTempoCorridaSeguinte.segundos = 59;\n        this.dadosTempoCorridaSeguinte.minutos = 59;\n        this.dadosTempoCorridaSeguinte.horas--;\n      }\n    }, 1000);\n  },\n};\n</script>\n\n<style scoped>\n.container-tempo {\n  font-size: 30px;\n  padding-top: 20px;\n  font-weight: 900;\n  margin: 0 auto;\n}\n\n.contador {\n  text-align: center;\n  color: rgb(250, 16, 16);\n  font-size: 45px;\n}\n\n.texto-contador {\n  text-align: center;\n  color: rgb(250, 16, 16);\n  margin: 0 auto;\n  font-size: 35px;\n}\n\n.texto-contador {\n  margin-top: -5px;\n}\n\n@media screen and (max-width: 400px) {\n  .contador {\n    padding-top: 8px;\n    font-size: 37px;\n  }\n\n  .texto-contador {\n    font-size: 26px;\n    margin-top: 0px;\n  }\n}\n</style>\n"]}]}